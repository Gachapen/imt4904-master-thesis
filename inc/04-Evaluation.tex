% !TEX root = ../Masters.tex
\chapter{Evaluation of DGEL}
DGEL consists of to main modules: \textit{generation} and \textit{evaluation}.
The evaluation module consists of the fitness component which evaluates who good the L-system plants are.
The remaining components are part of the generation component which generates plants, and uses the evaluation module to generate \textit{good} plants.
To answer if DGEL solves the research questions, both modules have to be evaluated.
The generation module will be evaluated in a technical manner to determine if it performs well or not.
The evaluation module will be evaluated using humans as to answer if the fitness function properly rates plants as aesthetically pleasing or not.

\section{Evaluation of the Generation Module}
\subsection{Method}
As explained in Section~\ref{sec:overview} and shown in Figure~\ref{fig:dgel}, there are two main processes involved in generating the model for the L-system plants: \textit{SA} and \textit{GE}.
The remaining steps are dependent on the model and do not create variations on the same model.
Thus GE and SA are the two processes of interests to evaluate.

% GE parameter tuning - have data
% GE vs random - have data
% SA parameter selection
% SA progress - have data, though not structured
% SA random vs random - need data, average of 100000 L-systems.
% GE SA vs GE uniform - need data, how to measure?
% Comparing plants from different SA.

\subsubsection{Grammar Evolution}
GE, as with GA, depends on multiple parameter, and with tournament sampling there are even more.
Thus, before evaluation the GE process, good parameters had to be found.
Additionally, seeing what parameters are needed for a good performing GE may reveal additional properties of it.
The parameters were found using a combined manual and automated approach by searching the parameter space in multiple steps.
The idea was not to find the optimal parameters, but rather to find some parameters that made the GE produce an individual with good fitness within a reasonable time.
It was assumed that the size parameters -- population size and number of generations -- are the baseline parameters for GE and thus should be found first.
Then the tournament size for the tournament selection stategy should be found.
Then good parameters for the recombination rates -- crossover rate and mutation rate -- should be found.
Finally the parameter for the GE gene duplication operator should be found.

To search for the GE parameters, a breadth-first graph search inspired approach was used.
An example is shown in Figure~\ref{fig:paramter-search}.
The approach tests a combination of parameters by doing 20 GE runs with those parameters and using the mean fitness score of the best individual from each run.
If the score is an improvement of the previous score, the search will also tests the neighboring nodes in the graph by increasing the parameter values.
Otherwise, the current parameter values will be considered as not improving the performance and thus be discarded.
When there are no more improvements, the parameter values that produced the best score will be returned.
% Not all of the samplings increases by multiplicative of 2!
The parameter values will start at a small value and increase with a multiplicative of 2 for each new node.
This is based on the assumption that the parameters are more sensitive when the values are small.

\begin{figure}
    \centering
    \includegraphics[width=0.6\textwidth]{figures/parameter-search}
    \caption{Example of a GE parameter search}
    \label{fig:parameter-search}
\end{figure}

To evaluate the GE process, it was compared to completely random set of L-systems.
If the best individual from the GE process has a higher fitness score than the best individual from the random set of individuals, the GE process is an improvement.
To make a fair comparison, the random set of individuals should contain as many individuals as the GE generates and modifies (through mutation or crossover)
This way, both methods will ``generate'' the same amount of individuals, either being completely new individuals or modifications of existing individuals.
GE uses a fixed number of generations and population size, resulting into a fixed number of chromosome generations and modifications: $individuals = population + population * generations$.
Thus the random set method will generate $individuals$ individuals.

Because both methods depend on a random seed, an average of multiple runs will have to be used.
A sample size of 11 was selected as balanced choice between sample size and duration.
Student's t-test was used to test the group mean difference.

\subsubsection{Simulated Annealing}
To evaluate the SA process, a list of questions were made:
\begin{itemize}
	\item Can SA and the grammar distribution be used to find portions of the paramter space that generate better L-system plants?
	\item Does SA enable GE to find better L-system plants?
	\item Can SA find multiple portions of the parameter space that each generate unique-looking plants?
\end{itemize}
To answer the first question, two methods were used.
First, SA was used as described in previous sections to find an optimized distribution, and the progress of it was plotted.
The progress plot was analyzed to see if SA made any meaningful progress.
Secondly, a comparison was made between the average fitness of L-systems randomly generated by a uniform distribution and L-systems randomly generated by an SA-optimized distribution.
The L-systems were generated in a completely random manner, not using any evolutionary approach such as GE.
% I need to actually run this experiment....
While this may answer if it is possible for an SA-optimized distribution to generate better plants, it does not answer if this always will be the case.

To answer the second question, the performance of GE with a uniform distribution was compared to the performance of GE with an SA-optimized distribution.
Both GE processes were run 11 times, each time extracting the best L-system, before taking the mean of the best L-systems and using a t-test to test if the means were different.

\subsection{Results}
\begin{figure}
    \centering
    \includegraphics[width=0.8\textwidth]{figures/ge-size-sampling}
    \caption{}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/ge-tournament-sampling}
    \caption{}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/ge-recombination-sampling}
    \caption{}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=0.5\textwidth]{figures/ge-recombination-sampling-variance}
    \caption{}
\end{figure}

Figure~\ref{fig:ge-random} shows the comparison of GE against random samples.
The difference in mean of best fitness is 0.13 (p < 0.01), where GE has a higher mean than random.
Thus there is a statistically significant difference between their performances.

\begin{figure}
    \centering
    \includegraphics[width=0.4\textwidth]{figures/ge-random}
    \caption{GE performance compared to random}
    \label{fig:ge-random}
\end{figure}

\section{Evaluation of Evaluation Module}
\subsection{Method}
\subsection{Results}
